"use strict";

const  qunit_tests_foodReport_apacheAcornStew = {
    apacheAcornStew: {
        "foods": [
            {
                "food": {
                    "sr": "1",
                    "type": "b",
                    "desc": {
                        "ndbno": "35182",
                        "name": "Acorn stew (Apache)",
                        "ds": "Standard Reference",
                        "manu": "",
                        "ru": "g"
                    },
                    "nutrients": [
                        {
                            "nutrient_id": "255",
                            "name": "Water",
                            "derivation": "NONE",
                            "group": "Proximates",
                            "unit": "g",
                            "value": "79.78",
                            "measures": []
                        },
                        {
                            "nutrient_id": "208",
                            "name": "Energy",
                            "derivation": "NC",
                            "group": "Proximates",
                            "unit": "kcal",
                            "value": "95",
                            "measures": []
                        },
                        {
                            "nutrient_id": "203",
                            "name": "Protein",
                            "derivation": "NONE",
                            "group": "Proximates",
                            "unit": "g",
                            "value": "6.81",
                            "measures": []
                        },
                        {
                            "nutrient_id": "204",
                            "name": "Total lipid (fat)",
                            "derivation": "NONE",
                            "group": "Proximates",
                            "unit": "g",
                            "value": "3.47",
                            "measures": []
                        },
                        {
                            "nutrient_id": "205",
                            "name": "Carbohydrate, by difference",
                            "derivation": "NC",
                            "group": "Proximates",
                            "unit": "g",
                            "value": "9.22",
                            "measures": []
                        },
                        {
                            "nutrient_id": "291",
                            "name": "Fiber, total dietary",
                            "derivation": "NONE",
                            "group": "Proximates",
                            "unit": "g",
                            "value": "0.7",
                            "measures": []
                        },
                        {
                            "nutrient_id": "269",
                            "name": "Sugars, total",
                            "derivation": "NONE",
                            "group": "Proximates",
                            "unit": "g",
                            "value": "0.34",
                            "measures": []
                        },
                        {
                            "nutrient_id": "301",
                            "name": "Calcium, Ca",
                            "derivation": "NONE",
                            "group": "Minerals",
                            "unit": "mg",
                            "value": "14",
                            "measures": []
                        },
                        {
                            "nutrient_id": "303",
                            "name": "Iron, Fe",
                            "derivation": "NONE",
                            "group": "Minerals",
                            "unit": "mg",
                            "value": "1.00",
                            "measures": []
                        },
                        {
                            "nutrient_id": "304",
                            "name": "Magnesium, Mg",
                            "derivation": "NONE",
                            "group": "Minerals",
                            "unit": "mg",
                            "value": "12",
                            "measures": []
                        },
                        {
                            "nutrient_id": "305",
                            "name": "Phosphorus, P",
                            "derivation": "NONE",
                            "group": "Minerals",
                            "unit": "mg",
                            "value": "62",
                            "measures": []
                        },
                        {
                            "nutrient_id": "306",
                            "name": "Potassium, K",
                            "derivation": "NONE",
                            "group": "Minerals",
                            "unit": "mg",
                            "value": "110",
                            "measures": []
                        },
                        {
                            "nutrient_id": "307",
                            "name": "Sodium, Na",
                            "derivation": "NONE",
                            "group": "Minerals",
                            "unit": "mg",
                            "value": "130",
                            "measures": []
                        },
                        {
                            "nutrient_id": "309",
                            "name": "Zinc, Zn",
                            "derivation": "NONE",
                            "group": "Minerals",
                            "unit": "mg",
                            "value": "1.60",
                            "measures": []
                        },
                        {
                            "nutrient_id": "401",
                            "name": "Vitamin C, total ascorbic acid",
                            "derivation": "NONE",
                            "group": "Vitamins",
                            "unit": "mg",
                            "value": "0.0",
                            "measures": []
                        },
                        {
                            "nutrient_id": "404",
                            "name": "Thiamin",
                            "derivation": "NONE",
                            "group": "Vitamins",
                            "unit": "mg",
                            "value": "0.175",
                            "measures": []
                        },
                        {
                            "nutrient_id": "405",
                            "name": "Riboflavin",
                            "derivation": "NONE",
                            "group": "Vitamins",
                            "unit": "mg",
                            "value": "0.125",
                            "measures": []
                        },
                        {
                            "nutrient_id": "406",
                            "name": "Niacin",
                            "derivation": "NONE",
                            "group": "Vitamins",
                            "unit": "mg",
                            "value": "2.140",
                            "measures": []
                        },
                        {
                            "nutrient_id": "415",
                            "name": "Vitamin B-6",
                            "derivation": "NONE",
                            "group": "Vitamins",
                            "unit": "mg",
                            "value": "0.055",
                            "measures": []
                        },
                        {
                            "nutrient_id": "435",
                            "name": "Folate, DFE",
                            "derivation": "NC",
                            "group": "Vitamins",
                            "unit": "µg",
                            "value": "44",
                            "measures": []
                        },
                        {
                            "nutrient_id": "418",
                            "name": "Vitamin B-12",
                            "derivation": "NONE",
                            "group": "Vitamins",
                            "unit": "µg",
                            "value": "0.68",
                            "measures": []
                        },
                        {
                            "nutrient_id": "320",
                            "name": "Vitamin A, RAE",
                            "derivation": "NC",
                            "group": "Vitamins",
                            "unit": "µg",
                            "value": "0",
                            "measures": []
                        },
                        {
                            "nutrient_id": "318",
                            "name": "Vitamin A, IU",
                            "derivation": "AS",
                            "group": "Vitamins",
                            "unit": "IU",
                            "value": "0",
                            "measures": []
                        },
                        {
                            "nutrient_id": "323",
                            "name": "Vitamin E (alpha-tocopherol)",
                            "derivation": "NONE",
                            "group": "Vitamins",
                            "unit": "mg",
                            "value": "0.30",
                            "measures": []
                        },
                        {
                            "nutrient_id": "430",
                            "name": "Vitamin K (phylloquinone)",
                            "derivation": "NONE",
                            "group": "Vitamins",
                            "unit": "µg",
                            "value": "0.0",
                            "measures": []
                        },
                        {
                            "nutrient_id": "606",
                            "name": "Fatty acids, total saturated",
                            "derivation": "NC",
                            "group": "Lipids",
                            "unit": "g",
                            "value": "1.280",
                            "measures": []
                        },
                        {
                            "nutrient_id": "645",
                            "name": "Fatty acids, total monounsaturated",
                            "derivation": "NC",
                            "group": "Lipids",
                            "unit": "g",
                            "value": "1.680",
                            "measures": []
                        },
                        {
                            "nutrient_id": "646",
                            "name": "Fatty acids, total polyunsaturated",
                            "derivation": "NC",
                            "group": "Lipids",
                            "unit": "g",
                            "value": "0.297",
                            "measures": []
                        },
                        {
                            "nutrient_id": "601",
                            "name": "Cholesterol",
                            "derivation": "NONE",
                            "group": "Lipids",
                            "unit": "mg",
                            "value": "20",
                            "measures": []
                        }
                    ],
                    "footnotes": [
                        {
                            "id": "a",
                            "desc": "Boiled stew made with water, beef or deer, prepared acorns, dumpling strips, salt, and pepper."
                        }
                    ]
                }
            }
        ],
        "count": 1,
        "notfound": 0,
        "api": 2
    },
    apacheAcornStewFormatted:"<div class=\"foodReport\"><h1>Nutrition Facts</h1><div class=\"hr\"></div><div id=\"foodReportHeaderSection\" ><br/><strong>Acorn stew (Apache)</strong></div><div class=\"hrWide\"></div > <div id=\"AmountPerServing\">Amount per serving</div><div class=\"foodReportMiddleSection\"><div id=\"Calories\"><div class=\"calorieText\">Calories</div><div class=\"calorieCount\">95</div></div><div class=\"hrThin\"></div><p id=\"percentDailyValue\">% Daily Value*</p><hr><div><strong>Total Fat</strong> <span> 3g</span><span class=\"floatRight\">5%</span><hr><div>&nbsp;&nbsp;&nbsp;&nbsp;Saturated Fat<span> 1g</span><span class=\"floatRight\">6%</span><hr><div>&nbsp;&nbsp;&nbsp;&nbsp;Trans Fat<hr><div><strong>Cholesterol</strong> <span> 20mg</span><span class=\"floatRight\">7%</span><hr><div><strong>Sodium</strong> <span> 130mg</span><span class=\"floatRight\">5%</span><hr><div><strong>Total Carbohydrates</strong> <span> 9g</span><span class=\"floatRight\">3%</span><hr><div>&nbsp;&nbsp;&nbsp;&nbsp;Dietary Fiber<span> 1g</span><span class=\"floatRight\">3%</span><hr><div>&nbsp;&nbsp;&nbsp;&nbsp;Total Sugars<span> 0g</span><hr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The USDA database does not yet contain information on added sugars.<hr><div>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Protein</strong> <span> 7g</span><span class=\"floatRight\">14%</span><div class= hrWide1></div><div>Vitamin D<span> 0 IU</span><span class=\"floatRight\">0%</span><hr><div>Calcium<span> 14mg</span><span class=\"floatRight\">4%</span><hr><div>Iron<span> 1mg</span><span class=\"floatRight\">0%</span><hr><div>Potassium<span> 110mg</span><span class=\"floatRight\">28%</span><div class= hrWide1></div>*The % Daily Value tells you how much a nutrient in a serving of food contributes to a daily diet.  2,000 calories a day is used for general nutrition advice.<hr> <br/><strong>INGREDIENTS:</strong>---<br/>   updated: ---<br/><strong>DISTRIBUTED BY:<br/>---</strong><br/><br/>" 
};

QUnit.test(" qunit_tests_foodReport_apacheAcornStew-1 A Hello World Test", function (assert) {
    assert.equal(qunit_default.greeting, "Hello World", "Expect greeting of Hello World. Tests that qunit is working.");
});


QUnit.test("foodList-2 The foodReport For Apache Acorn Stew is returned when the button is clicked", function (assert) {
    assert.expect(2);
    let done = assert.async(); 
    const apacheAcornStew =  qunit_tests_foodReport_apacheAcornStew.apacheAcornStew;
    const correctNdbno = apacheAcornStew.foods[0].food.desc.ndbno;


    setTimeout(async function () {
        let returned = await innerTest1();
        const returnedNdbno = returned.foods[0].food.desc.ndbno;
        assert.deepEqual(apacheAcornStew, returned, "Got correct search results");
        assert.equal(correctNdbno, returnedNdbno, "ndbno");
        done();
    });

    async function innerTest1() {
        return await foodReport.searchSubmit(correctNdbno);
    }
});


QUnit.test("foodList-3 The formatted foodReport For Apache Acorn Stew is returned when the button is clicked", function (assert) { 
    let done = assert.async();
    const apacheAcornStewFormatted =  qunit_tests_foodReport_apacheAcornStew.apacheAcornStewFormatted
    const correctNdbno =  qunit_tests_foodReport_apacheAcornStew.apacheAcornStew.foods[0].food.desc.ndbno;


    setTimeout(async function () {
        let returned = await innerTest1(); 
        assert.deepEqual(returned,apacheAcornStewFormatted,  "Got correct formatted results"); 
        done();
    });

    async function innerTest1() {
        const report = await foodReport.searchSubmit(correctNdbno);
       
        return foodReport.formatFoodReport(report);
    }
});