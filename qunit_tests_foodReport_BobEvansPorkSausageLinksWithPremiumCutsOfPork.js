"use strict";

const qunit_tests_foodReport_porkSausageLinks = {
    porkSausageLinks: {
        "foods": [
            {
                "food": {
                    "sr": "July, 2018",
                    "type": "b",
                    "desc": {
                        "ndbno": "45288212",
                        "name": "BREAKFAST LINKS PORK SAUSAGE, UPC: 046567500997",
                        "ds": "Label Insight",
                        "manu": "RALEY'S",
                        "ru": "g"
        },
                    "ing": {
                        "desc": "PORK, WATER, SODIUM LACTATE, SEASONINGS (SALT, SPICES, DEXTROSE, FLAVORINGS, LEMON EXTRACT).",
                        "upd": "07/14/2017"
        },
                    "nutrients": [
                        {
                            "nutrient_id": "208",
                            "name": "Energy",
                            "derivation": "LCCS",
                            "group": "Proximates",
                            "unit": "kcal",
                            "value": "356",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "160"
              }
                            ]
                        },
                        {
                            "nutrient_id": "203",
                            "name": "Protein",
                            "derivation": "LCCS",
                            "group": "Proximates",
                            "unit": "g",
                            "value": "33.33",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "15.00"
              }
                            ]
                        },
                        {
                            "nutrient_id": "204",
                            "name": "Total lipid (fat)",
                            "derivation": "LCCS",
                            "group": "Proximates",
                            "unit": "g",
                            "value": "22.22",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "10.00"
              }
                            ]
                        },
                        {
                            "nutrient_id": "205",
                            "name": "Carbohydrate, by difference",
                            "derivation": "LCCS",
                            "group": "Proximates",
                            "unit": "g",
                            "value": "2.22",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "1.00"
              }
                            ]
                        },
                        {
                            "nutrient_id": "291",
                            "name": "Fiber, total dietary",
                            "derivation": "LCCD",
                            "group": "Proximates",
                            "unit": "g",
                            "value": "0.0",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "0.0"
              }
                            ]
                        },
                        {
                            "nutrient_id": "269",
                            "name": "Sugars, total",
                            "derivation": "LCCS",
                            "group": "Proximates",
                            "unit": "g",
                            "value": "0.00",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "0.00"
              }
                            ]
                        },
                        {
                            "nutrient_id": "301",
                            "name": "Calcium, Ca",
                            "derivation": "LCCD",
                            "group": "Minerals",
                            "unit": "mg",
                            "value": "0",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "0"
              }
                            ]
                        },
                        {
                            "nutrient_id": "303",
                            "name": "Iron, Fe",
                            "derivation": "LCCD",
                            "group": "Minerals",
                            "unit": "mg",
                            "value": "3.20",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "1.44"
              }
                            ]
                        },
                        {
                            "nutrient_id": "307",
                            "name": "Sodium, Na",
                            "derivation": "LCCS",
                            "group": "Minerals",
                            "unit": "mg",
                            "value": "1689",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "760"
              }
                            ]
                        },
                        {
                            "nutrient_id": "401",
                            "name": "Vitamin C, total ascorbic acid",
                            "derivation": "LCCD",
                            "group": "Vitamins",
                            "unit": "mg",
                            "value": "20.0",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "9.0"
              }
                            ]
                        },
                        {
                            "nutrient_id": "318",
                            "name": "Vitamin A, IU",
                            "derivation": "LCCD",
                            "group": "Vitamins",
                            "unit": "IU",
                            "value": "0",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "0"
              }
                            ]
                        },
                        {
                            "nutrient_id": "606",
                            "name": "Fatty acids, total saturated",
                            "derivation": "LCCS",
                            "group": "Lipids",
                            "unit": "g",
                            "value": "8.890",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "4.000"
              }
                            ]
                        },
                        {
                            "nutrient_id": "605",
                            "name": "Fatty acids, total trans",
                            "derivation": "LCCS",
                            "group": "Lipids",
                            "unit": "g",
                            "value": "0.000",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "0.000"
              }
                            ]
                        },
                        {
                            "nutrient_id": "601",
                            "name": "Cholesterol",
                            "derivation": "LCCS",
                            "group": "Lipids",
                            "unit": "mg",
                            "value": "133",
                            "measures": [
                                {
                                    "label": "COOKED LINKS",
                                    "eqv": 45,
                                    "eunit": "g",
                                    "qty": 2,
                                    "value": "60"
              }
                            ]
                        }
                    ],
                    "footnotes": []
                }
            }
        ],
        "count": 1,
        "notfound": 0,
        "api": 2
},
    porkSausageLinksFormatted:
        "<div class=\"foodReport\"><h1>Nutrition Facts</h1><div class=\"hr\"></div><div id=\"foodReportHeaderSection\" ><br/><strong>BREAKFAST LINKS PORK SAUSAGE, UPC: 046567500997</strong><br/><strong>Serving Size: COOKED LINKS  (45g)</strong></div><div class=\"hrWide\"></div > <div id=\"AmountPerServing\">Amount per serving</div><div class=\"foodReportMiddleSection\"><div id=\"Calories\"><div class=\"calorieText\">Calories</div><div class=\"calorieCount\">356</div></div><div class=\"hrThin\"></div><p id=\"percentDailyValue\">% Daily Value*</p><hr><div><strong>Total Fat</strong> <span> 22g</span><span class=\"floatRight\">34%</span><hr><div>&nbsp;&nbsp;&nbsp;&nbsp;Saturated Fat<span> 9g</span><span class=\"floatRight\">44%</span><hr><div>&nbsp;&nbsp;&nbsp;&nbsp;Trans Fat<span> 0g</span><hr><div><strong>Cholesterol</strong> <span> 133mg</span><span class=\"floatRight\">44%</span><hr><div><strong>Sodium</strong> <span> 1689mg</span><span class=\"floatRight\">70%</span><hr><div><strong>Total Carbohydrates</strong> <span> 2g</span><span class=\"floatRight\">1%</span><hr><div>&nbsp;&nbsp;&nbsp;&nbsp;Dietary Fiber<span> 0g</span><span class=\"floatRight\">0%</span><hr><div>&nbsp;&nbsp;&nbsp;&nbsp;Total Sugars<span> 0g</span><hr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The USDA database does not yet contain information on added sugars.<hr><div>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Protein</strong> <span> 33g</span><span class=\"floatRight\">67%</span><div class= hrWide1></div><div>Vitamin D<span> 0 IU</span><span class=\"floatRight\">0%</span><hr><div>Calcium<span> 0mg</span><span class=\"floatRight\">0%</span><hr><div>Iron<span> 3mg</span><span class=\"floatRight\">1%</span><hr><div>Potassium<span> 0mg</span><span class=\"floatRight\">0%</span><div class= hrWide1></div>*The % Daily Value tells you how much a nutrient in a serving of food contributes to a daily diet.  2,000 calories a day is used for general nutrition advice.<hr> <br/><strong>INGREDIENTS:</strong>PORK, WATER, SODIUM LACTATE, SEASONINGS (SALT, SPICES, DEXTROSE, FLAVORINGS, LEMON EXTRACT).<br/>   updated: 07/14/2017<br/><strong>DISTRIBUTED BY:<br/>RALEY'S</strong><br/><br/>"
};

QUnit.test("qunit_tests_foodReport Pork SausageLinks-1 A Hello World Test", function (assert) {
    assert.equal(qunit_default.greeting, "Hello World", "Expect greeting of Hello World. Tests that qunit is working.");
});


QUnit.test("foodList-Pork SausageLinks 2 The foodReport For PorkSausageLinks is returned when the button is clicked", function (assert) {
    assert.expect(2);
    let done = assert.async(); 
    const psl = qunit_tests_foodReport_porkSausageLinks;
    const correct = psl.porkSausageLinks;
    const correctNdbno =  psl.porkSausageLinks.foods[0].food.desc.ndbno;


    setTimeout(async function () {
        let returned = await innerTest1();
        const returnedNdbno  = returned.foods[0].food.desc.ndbno;
        assert.deepEqual(correct, returned, "Got correct search results");
        assert.equal(correctNdbno, returnedNdbno, "ndbno");
        done();
    });

    async function innerTest1() { 
      return await foodReport.searchSubmit(correctNdbno); 
    }
});


QUnit.test("foodList-3 The formatted foodReport For Pork Sausage Links is returned when the button is clicked", function (assert) { 
    let done = assert.async();
    const porkSausageLinksFormatted = qunit_tests_foodReport_porkSausageLinks.porkSausageLinksFormatted
    const correctNdbno = qunit_tests_foodReport_porkSausageLinks.porkSausageLinks.foods[0].food.desc.ndbno;


    setTimeout(async function () {
        let returned = await innerTest1(); 
        assert.deepEqual(returned, porkSausageLinksFormatted, "Got correct formatted results");
      
        done();
    });

    async function innerTest1() {
        const report = await foodReport.searchSubmit(correctNdbno);
        return foodReport.formatFoodReport(report);
    }
});